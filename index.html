<html lang="zh-TW">
  <head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="styles.css" rel="stylesheet"></link>
<script src="zepto.min.js"></script>
<script>
function doLoad () {
    var prevId, prevVal, titleToId;
    setTimeout(function() {
        if ($.browser.webkit && !/Android/.test(navigator.userAgent) && /Chrome/.test(navigator.userAgent)) {
            $('#toc').load("options.html", function(){
                init();
            });
        }
        else {
            $.get("options.html", function(data) {
                titleToId = JSON.parse(data.replace(
                    /<option value=/g, ','
                ).replace(
                    / id=/g, ':'
                ).replace(
                    / \/>/g, ''
                ).replace(/,/, '{') + '}')
                init();
            });
        }
    }, 1);
    function init () {
        $('#result').load("data/79/18979.html");
        $('#query').keyup(lookup).change(lookup).keypress(lookup).keydown(lookup).on('input', lookup);
        $('#query').show().focus();
    }
    function lookup (){
        var val = $('#query').val();
        if (prevVal == val) { return true }
        prevVal = val;
        var id = titleToId ? titleToId[val] : $('option[value="' + val + '"]').attr('id');
        if (prevId == id) { return true }
        if (id) {
            prevId = id;
            $('#result').load("data/" + (id % 100) + "/" + id + ".html")
        }
        return true;
    }
}
</script>
</head>
<body onload="doLoad()">
<div id="result">
    <center style="font-size: 30px">
        載入中，請稍候…
        <br /><br />
        &#xF9868;
    </center>
</div>
<datalist id="toc">
</datalist>
<input id="query" style="display: none" autofocus speech x-webkit-speech list="toc" autocomplete="off" />
</body>
</html>
